var egret=window.egret;var __reflect=this&&this.__reflect||function(p,c,t){p.__class__=c,t?t.push(c):t=[c],p.__types__=p.__types__?t.concat(p.__types__):t};var __extends=this&&this.__extends||function __extends(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r};var egret;(function(egret){var URLLoaderDataFormat=function(){function URLLoaderDataFormat(){}URLLoaderDataFormat.BINARY="binary";URLLoaderDataFormat.TEXT="text";URLLoaderDataFormat.VARIABLES="variables";URLLoaderDataFormat.TEXTURE="texture";URLLoaderDataFormat.SOUND="sound";return URLLoaderDataFormat}();egret.URLLoaderDataFormat=URLLoaderDataFormat;__reflect(URLLoaderDataFormat.prototype,"egret.URLLoaderDataFormat")})(egret||(egret={}));var egret;(function(egret){var FrameLabel=function(_super){__extends(FrameLabel,_super);function FrameLabel(name,frame,end){var _this=_super.call(this)||this;_this._name=name;_this._frame=frame|0;if(end)_this._end=end|0;return _this}Object.defineProperty(FrameLabel.prototype,"name",{get:function(){return this._name},enumerable:true,configurable:true});Object.defineProperty(FrameLabel.prototype,"frame",{get:function(){return this._frame},enumerable:true,configurable:true});Object.defineProperty(FrameLabel.prototype,"end",{get:function(){return this._end},enumerable:true,configurable:true});FrameLabel.prototype.clone=function(){return new FrameLabel(this._name,this._frame,this._end)};return FrameLabel}(egret.EventDispatcher);egret.FrameLabel=FrameLabel;__reflect(FrameLabel.prototype,"egret.FrameLabel")})(egret||(egret={}));var egret;(function(egret){var MovieClipData=function(_super){__extends(MovieClipData,_super);function MovieClipData(){var _this=_super.call(this)||this;_this.$mcData=null;_this.numFrames=1;_this.frames=[];_this.labels=null;_this.events=[];_this.frameRate=0;_this.textureData=null;_this.spriteSheet=null;return _this}MovieClipData.prototype.$init=function(mcData,textureData,spriteSheet){this.textureData=textureData;this.spriteSheet=spriteSheet;this.setMCData(mcData)};MovieClipData.prototype.getKeyFrameData=function(frame){var outputFrameData=this.frames[frame-1];if(outputFrameData.frame){outputFrameData=this.frames[outputFrameData.frame-1]}return outputFrameData};MovieClipData.prototype.getTextureByFrame=function(frame){var frameData=this.getKeyFrameData(frame);if(frameData.res){var outputTexture=this.getTextureByResName(frameData.res);return outputTexture}return null};MovieClipData.prototype.$getOffsetByFrame=function(frame,point){var frameData=this.getKeyFrameData(frame);if(frameData.res){point.setTo(frameData.x|0,frameData.y|0)}};MovieClipData.prototype.getTextureByResName=function(resName){if(this.spriteSheet==null){return null}var texture=this.spriteSheet.getTexture(resName);if(!texture){var textureData=this.textureData[resName];texture=this.spriteSheet.createTexture(resName,textureData.x,textureData.y,textureData.w,textureData.h)}return texture};MovieClipData.prototype.$isDataValid=function(){return this.frames.length>0};MovieClipData.prototype.$isTextureValid=function(){return this.textureData!=null&&this.spriteSheet!=null};MovieClipData.prototype.$fillMCData=function(mcData){this.frameRate=mcData["frameRate"]||24;this.fillFramesData(mcData.frames);this.fillFrameLabelsData(mcData.labels);this.fillFrameEventsData(mcData.events)};MovieClipData.prototype.fillFramesData=function(framesData){var frames=this.frames;var length=framesData?framesData.length:0;var keyFramePosition;for(var i=0;i<length;i++){var frameData=framesData[i];frames.push(frameData);if(frameData.duration){var duration=parseInt(frameData.duration);if(duration>1){keyFramePosition=frames.length;for(var j=1;j<duration;j++){frames.push({frame:keyFramePosition})}}}}this.numFrames=frames.length};MovieClipData.prototype.fillFrameLabelsData=function(frameLabelsData){if(frameLabelsData){var length_1=frameLabelsData.length;if(length_1>0){this.labels=[];for(var i=0;i<length_1;i++){var label=frameLabelsData[i];this.labels.push(new egret.FrameLabel(label.name,label.frame,label.end))}}}};MovieClipData.prototype.fillFrameEventsData=function(frameEventsData){if(frameEventsData){var length_2=frameEventsData.length;if(length_2>0){this.events=[];for(var i=0;i<length_2;i++){var events=frameEventsData[i];this.events[events.frame]=events.name}}}};Object.defineProperty(MovieClipData.prototype,"mcData",{get:function(){return this.$mcData},set:function(value){this.setMCData(value)},enumerable:true,configurable:true});MovieClipData.prototype.setMCData=function(value){if(this.$mcData==value){return}this.$mcData=value;if(value){this.$fillMCData(value)}};return MovieClipData}(egret.HashObject);egret.MovieClipData=MovieClipData;__reflect(MovieClipData.prototype,"egret.MovieClipData")})(egret||(egret={}));var egret;(function(egret){var MovieClipDataFactory=function(_super){__extends(MovieClipDataFactory,_super);function MovieClipDataFactory(movieClipDataSet,texture){var _this=_super.call(this)||this;_this.enableCache=true;_this.$mcDataCache={};_this.$mcDataSet=movieClipDataSet;_this.setTexture(texture);return _this}MovieClipDataFactory.prototype.clearCache=function(){this.$mcDataCache={}};MovieClipDataFactory.prototype.generateMovieClipData=function(movieClipName){if(movieClipName===void 0){movieClipName=""}if(movieClipName==""){if(this.$mcDataSet){for(movieClipName in this.$mcDataSet.mc){break}}}if(movieClipName==""){return null}var output=this.findFromCache(movieClipName,this.$mcDataCache);if(!output){output=new egret.MovieClipData;this.fillData(movieClipName,output,this.$mcDataCache)}return output};MovieClipDataFactory.prototype.findFromCache=function(movieClipName,cache){if(this.enableCache&&cache[movieClipName]){return cache[movieClipName]}return null};MovieClipDataFactory.prototype.fillData=function(movieClipName,movieClip,cache){if(this.$mcDataSet){var mcData=this.$mcDataSet.mc[movieClipName];if(mcData){movieClip.$init(mcData,this.$mcDataSet.res,this.$spriteSheet);if(this.enableCache){cache[movieClipName]=movieClip}}}};Object.defineProperty(MovieClipDataFactory.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(value){this.$mcDataSet=value},enumerable:true,configurable:true});Object.defineProperty(MovieClipDataFactory.prototype,"texture",{set:function(value){this.setTexture(value)},enumerable:true,configurable:true});Object.defineProperty(MovieClipDataFactory.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:true,configurable:true});MovieClipDataFactory.prototype.setTexture=function(value){this.$spriteSheet=value?new egret.SpriteSheet(value):null};return MovieClipDataFactory}(egret.EventDispatcher);egret.MovieClipDataFactory=MovieClipDataFactory;__reflect(MovieClipDataFactory.prototype,"egret.MovieClipDataFactory")})(egret||(egret={}));var egret;(function(egret){var MovieClipEvent=function(_super){__extends(MovieClipEvent,_super);function MovieClipEvent(type,bubbles,cancelable,frameLabel){if(bubbles===void 0){bubbles=false}if(cancelable===void 0){cancelable=false}if(frameLabel===void 0){frameLabel=null}var _this=_super.call(this,type,bubbles,cancelable)||this;_this.frameLabel=null;_this.frameLabel=frameLabel;return _this}MovieClipEvent.dispatchMovieClipEvent=function(target,type,frameLabel){if(frameLabel===void 0){frameLabel=null}var event=egret.Event.create(MovieClipEvent,type);event.frameLabel=frameLabel;var result=target.dispatchEvent(event);egret.Event.release(event);return result};MovieClipEvent.FRAME_LABEL="frame_label";return MovieClipEvent}(egret.Event);egret.MovieClipEvent=MovieClipEvent;__reflect(MovieClipEvent.prototype,"egret.MovieClipEvent")})(egret||(egret={}));var egret;(function(egret){var ScrollEase=function(){function ScrollEase(){egret.$error(1014)}ScrollEase.get=function(amount){if(amount<-1){amount=-1}if(amount>1){amount=1}return function(t){if(amount==0){return t}if(amount<0){return t*(t*-amount+1+amount)}return t*((2-t)*amount+(1-amount))}};ScrollEase.getPowOut=function(pow){return function(t){return 1-Math.pow(1-t,pow)}};ScrollEase.quintOut=ScrollEase.getPowOut(5);ScrollEase.quartOut=ScrollEase.getPowOut(4);return ScrollEase}();egret.ScrollEase=ScrollEase;__reflect(ScrollEase.prototype,"egret.ScrollEase");var ScrollTween=function(_super){__extends(ScrollTween,_super);function ScrollTween(target,props,pluginData){var _this=_super.call(this)||this;_this._target=null;_this._useTicks=false;_this.ignoreGlobalPause=false;_this.loop=false;_this.pluginData=null;_this._steps=null;_this._actions=null;_this.paused=false;_this.duration=0;_this._prevPos=-1;_this.position=null;_this._prevPosition=0;_this._stepPosition=0;_this.passive=false;_this.initialize(target,props,pluginData);return _this}ScrollTween.get=function(target,props,pluginData,override){if(props===void 0){props=null}if(pluginData===void 0){pluginData=null}if(override===void 0){override=false}if(override){ScrollTween.removeTweens(target)}return new ScrollTween(target,props,pluginData)};ScrollTween.removeTweens=function(target){if(!target.tween_count){return}var tweens=ScrollTween._tweens;for(var i=tweens.length-1;i>=0;i--){if(tweens[i]._target==target){tweens[i].paused=true;tweens.splice(i,1)}}target.tween_count=0};ScrollTween.tick=function(timeStamp,paused){if(paused===void 0){paused=false}var delta=timeStamp-ScrollTween._lastTime;ScrollTween._lastTime=timeStamp;var tweens=ScrollTween._tweens.concat();for(var i=tweens.length-1;i>=0;i--){var tween=tweens[i];if(paused&&!tween.ignoreGlobalPause||tween.paused){continue}tween.tick(tween._useTicks?1:delta)}return false};ScrollTween._register=function(tween,value){var target=tween._target;var tweens=ScrollTween._tweens;if(value){if(target){target.tween_count=target.tween_count>0?target.tween_count+1:1}tweens.push(tween);if(!ScrollTween._inited){ScrollTween._lastTime=egret.getTimer();egret.ticker.$startTick(ScrollTween.tick,null);ScrollTween._inited=true}}else{if(target){target.tween_count--}var i=tweens.length;while(i--){if(tweens[i]==tween){tweens.splice(i,1);return}}}};ScrollTween.prototype.initialize=function(target,props,pluginData){this._target=target;if(props){this._useTicks=props.useTicks;this.ignoreGlobalPause=props.ignoreGlobalPause;this.loop=props.loop;props.onChange&&this.addEventListener("change",props.onChange,props.onChangeObj);if(props.override){ScrollTween.removeTweens(target)}}this.pluginData=pluginData||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];if(props&&props.paused){this.paused=true}else{ScrollTween._register(this,true)}if(props&&props.position!=null){this.setPosition(props.position)}};ScrollTween.prototype.setPosition=function(value,actionsMode){if(actionsMode===void 0){actionsMode=1}if(value<0){value=0}var t=value;var end=false;if(t>=this.duration){if(this.loop){t=t%this.duration}else{t=this.duration;end=true}}if(t==this._prevPos){return end}var prevPos=this._prevPos;this.position=this._prevPos=t;this._prevPosition=value;if(this._target){if(end){this._updateTargetProps(null,1)}else if(this._steps.length>0){var i=void 0;var l=this._steps.length;for(i=0;i<l;i++){if(this._steps[i].t>t){break}}var step=this._steps[i-1];this._updateTargetProps(step,(this._stepPosition=t-step.t)/step.d)}}if(end){this.setPaused(true)}if(actionsMode!=0&&this._actions.length>0){if(this._useTicks){this._runActions(t,t)}else if(actionsMode==1&&t<prevPos){if(prevPos!=this.duration){this._runActions(prevPos,this.duration)}this._runActions(0,t,true)}else{this._runActions(prevPos,t)}}this.dispatchEventWith("change");return end};ScrollTween.prototype._runActions=function(startPos,endPos,includeStart){if(includeStart===void 0){includeStart=false}var sPos=startPos;var ePos=endPos;var i=-1;var j=this._actions.length;var k=1;if(startPos>endPos){sPos=endPos;ePos=startPos;i=j;j=k=-1}while((i+=k)!=j){var action=this._actions[i];var pos=action.t;if(pos==ePos||pos>sPos&&pos<ePos||includeStart&&pos==startPos){action.f.apply(action.o,action.p)}}};ScrollTween.prototype._updateTargetProps=function(step,ratio){var p0,p1,v,v0,v1,arr;if(!step&&ratio==1){this.passive=false;p0=p1=this._curQueueProps}else{this.passive=!!step.v;if(this.passive){return}if(step.e){ratio=step.e(ratio,0,1,1)}p0=step.p0;p1=step.p1}for(var n in this._initQueueProps){if((v0=p0[n])==null){p0[n]=v0=this._initQueueProps[n]}if((v1=p1[n])==null){p1[n]=v1=v0}if(v0==v1||ratio==0||ratio==1||typeof v0!="number"){v=ratio==1?v1:v0}else{v=v0+(v1-v0)*ratio}var ignore=false;if(arr=ScrollTween._plugins[n]){for(var i=0,l=arr.length;i<l;i++){var v2=arr[i].tween(this,n,v,p0,p1,ratio,!!step&&p0==p1,!step);if(v2==ScrollTween.IGNORE){ignore=true}else{v=v2}}}if(!ignore){this._target[n]=v}}};ScrollTween.prototype.setPaused=function(value){this.paused=value;ScrollTween._register(this,!value);return this};ScrollTween.prototype._cloneProps=function(props){var o={};for(var n in props){o[n]=props[n]}return o};ScrollTween.prototype._addStep=function(o){if(o.d>0){this._steps.push(o);o.t=this.duration;this.duration+=o.d}return this};ScrollTween.prototype._appendQueueProps=function(o){var arr,oldValue,i,l,injectProps;for(var n in o){if(this._initQueueProps[n]===undefined){oldValue=this._target[n];if(arr=ScrollTween._plugins[n]){for(i=0,l=arr.length;i<l;i++){oldValue=arr[i].init(this,n,oldValue)}}this._initQueueProps[n]=this._curQueueProps[n]=oldValue===undefined?null:oldValue}else{oldValue=this._curQueueProps[n]}}for(var n in o){oldValue=this._curQueueProps[n];if(arr=ScrollTween._plugins[n]){injectProps=injectProps||{};for(i=0,l=arr.length;i<l;i++){if(arr[i].step){arr[i].step(this,n,oldValue,o[n],injectProps)}}}this._curQueueProps[n]=o[n]}if(injectProps){this._appendQueueProps(injectProps)}return this._curQueueProps};ScrollTween.prototype._addAction=function(o){o.t=this.duration;this._actions.push(o);return this};ScrollTween.prototype.to=function(props,duration,ease){if(ease===void 0){ease=undefined}if(isNaN(duration)||duration<0){duration=0}return this._addStep({d:duration||0,p0:this._cloneProps(this._curQueueProps),e:ease,p1:this._cloneProps(this._appendQueueProps(props))})};ScrollTween.prototype.call=function(callback,thisObj,params){if(thisObj===void 0){thisObj=undefined}if(params===void 0){params=undefined}return this._addAction({f:callback,p:params?params:[],o:thisObj?thisObj:this._target})};ScrollTween.prototype.tick=function(delta){if(this.paused){return}this.setPosition(this._prevPosition+delta)};ScrollTween._tweens=[];ScrollTween.IGNORE={};ScrollTween._plugins={};ScrollTween._inited=false;ScrollTween._lastTime=0;return ScrollTween}(egret.EventDispatcher);egret.ScrollTween=ScrollTween;__reflect(ScrollTween.prototype,"egret.ScrollTween")})(egret||(egret={}));var egret;(function(egret){var ScrollView=function(_super){__extends(ScrollView,_super);function ScrollView(content){if(content===void 0){content=null}var _this=_super.call(this)||this;_this.scrollBeginThreshold=10;_this.scrollSpeed=1;_this._content=null;_this.delayTouchBeginEvent=null;_this.touchBeginTimer=null;_this.touchEnabled=true;_this._ScrV_Props_=new egret.ScrollViewProperties;if(content){_this.setContent(content)}return _this}Object.defineProperty(ScrollView.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(value){this._ScrV_Props_._bounces=!!value},enumerable:true,configurable:true});ScrollView.prototype.setContent=function(content){if(this._content===content)return;this.removeContent();if(content){this._content=content;_super.prototype.addChild.call(this,content);this._addEvents()}};ScrollView.prototype.removeContent=function(){if(this._content){this._removeEvents();_super.prototype.removeChildAt.call(this,0)}this._content=null};Object.defineProperty(ScrollView.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(value){if(value==this._ScrV_Props_._verticalScrollPolicy)return;this._ScrV_Props_._verticalScrollPolicy=value},enumerable:true,configurable:true});Object.defineProperty(ScrollView.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(value){if(value==this._ScrV_Props_._horizontalScrollPolicy)return;this._ScrV_Props_._horizontalScrollPolicy=value},enumerable:true,configurable:true});Object.defineProperty(ScrollView.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(value){if(value==this._ScrV_Props_._scrollLeft)return;this._ScrV_Props_._scrollLeft=value;this._validatePosition(false,true);this._updateContentPosition()},enumerable:true,configurable:true});Object.defineProperty(ScrollView.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(value){if(value==this._ScrV_Props_._scrollTop)return;this._ScrV_Props_._scrollTop=value;this._validatePosition(true,false);this._updateContentPosition()},enumerable:true,configurable:true});ScrollView.prototype.setScrollPosition=function(top,left,isOffset){if(isOffset===void 0){isOffset=false}if(isOffset&&top==0&&left==0)return;if(!isOffset&&this._ScrV_Props_._scrollTop==top&&this._ScrV_Props_._scrollLeft==left)return;var oldTop=this._ScrV_Props_._scrollTop,oldLeft=this._ScrV_Props_._scrollLeft;if(isOffset){var maxLeft=this.getMaxScrollLeft();var maxTop=this.getMaxScrollTop();if(oldTop<=0||oldTop>=maxTop){top=top/2}if(oldLeft<=0||oldLeft>=maxLeft){left=left/2}var newTop=oldTop+top;var newLeft=oldLeft+left;var bounces=this._ScrV_Props_._bounces;if(!bounces){if(newTop<=0||newTop>=maxTop)newTop=Math.max(0,Math.min(newTop,maxTop));if(newLeft<=0||newLeft>=maxLeft)newLeft=Math.max(0,Math.min(newLeft,maxLeft))}this._ScrV_Props_._scrollTop=newTop;this._ScrV_Props_._scrollLeft=newLeft}else{this._ScrV_Props_._scrollTop=top;this._ScrV_Props_._scrollLeft=left}this._validatePosition(true,true);this._updateContentPosition()};ScrollView.prototype._validatePosition=function(top,left){if(top===void 0){top=false}if(left===void 0){left=false}if(top){var height=this.height;var contentHeight=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-height)/2);this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,contentHeight>height?contentHeight-height/2:height/2)}if(left){var width=this.width;var contentWidth=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-width)/2);this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,contentWidth>width?contentWidth-width/2:width/2)}};ScrollView.prototype.$setWidth=function(value){if(this.$explicitWidth==value){return}_super.prototype.$setWidth.call(this,value);this._updateContentPosition()};ScrollView.prototype.$setHeight=function(value){if(this.$explicitHeight==value){return}_super.prototype.$setHeight.call(this,value);this._updateContentPosition()};ScrollView.prototype._updateContentPosition=function(){var height=this.height;var width=this.width;this.scrollRect=new egret.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),width,height);this.dispatchEvent(new egret.Event(egret.Event.CHANGE))};ScrollView.prototype._checkScrollPolicy=function(){var hpolicy=this._ScrV_Props_._horizontalScrollPolicy;var hCanScroll=this.__checkScrollPolicy(hpolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=hCanScroll;var vpolicy=this._ScrV_Props_._verticalScrollPolicy;var vCanScroll=this.__checkScrollPolicy(vpolicy,this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=vCanScroll;return hCanScroll||vCanScroll};ScrollView.prototype.__checkScrollPolicy=function(policy,contentLength,viewLength){if(policy=="on")return true;if(policy=="off")return false;return contentLength>viewLength};ScrollView.prototype._addEvents=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,true);this.addEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,true)};ScrollView.prototype._removeEvents=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,true);this.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,true)};ScrollView.prototype._onTouchBegin=function(e){if(e.$isDefaultPrevented){return}var canScroll=this._checkScrollPolicy();if(!canScroll){return}this._ScrV_Props_._touchStartPosition.x=e.stageX;this._ScrV_Props_._touchStartPosition.y=e.stageY;if(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying){this._onScrollFinished()}this._tempStage=this.stage;this._tempStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);this._tempStage.addEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEnd,this);this._tempStage.addEventListener(egret.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.addEventListener(egret.Event.ENTER_FRAME,this._onEnterFrame,this);this._logTouchEvent(e);e.preventDefault()};ScrollView.prototype._onTouchBeginCapture=function(event){var canScroll=this._checkScrollPolicy();if(!canScroll){return}var target=event.target;while(target!=this){if("_checkScrollPolicy"in target){canScroll=target._checkScrollPolicy();if(canScroll){return}}target=target.parent}event.stopPropagation();var evt=this.cloneTouchEvent(event);this.delayTouchBeginEvent=evt;if(!this.touchBeginTimer){this.touchBeginTimer=new egret.Timer(100,1);this.touchBeginTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)}this.touchBeginTimer.start();this._onTouchBegin(event)};ScrollView.prototype._onTouchEndCapture=function(event){var _this=this;if(!this.delayTouchBeginEvent){return}this._onTouchBeginTimer();event.stopPropagation();var evt=this.cloneTouchEvent(event);egret.callLater(function(){if(_this.stage){_this.dispatchPropagationEvent(evt)}},this)};ScrollView.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var event=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;if(this.stage)this.dispatchPropagationEvent(event)};ScrollView.prototype.dispatchPropagationEvent=function(event){var target=event.$target;var list=this.$getPropagationList(target);var length=list.length;var targetIndex=list.length*.5;var startIndex=-1;for(var i=0;i<length;i++){if(list[i]===this._content){startIndex=i;break}}list.splice(0,startIndex+1);targetIndex-=startIndex+1;this.$dispatchPropagationEvent(event,list,targetIndex);egret.Event.release(event)};ScrollView.prototype._onTouchMove=function(event){if(this._ScrV_Props_._lastTouchPosition.x==event.stageX&&this._ScrV_Props_._lastTouchPosition.y==event.stageY)return;if(!this._ScrV_Props_._scrollStarted){var x=event.stageX-this._ScrV_Props_._touchStartPosition.x,y=event.stageY-this._ScrV_Props_._touchStartPosition.y;var distance=Math.sqrt(x*x+y*y);if(distance<this.scrollBeginThreshold){this._logTouchEvent(event);return}}this._ScrV_Props_._scrollStarted=true;if(this.delayTouchBeginEvent){this.delayTouchBeginEvent=null;this.touchBeginTimer.stop()}this.touchChildren=false;var offset=this._getPointChange(event);this.setScrollPosition(offset.y,offset.x,true);this._calcVelocitys(event);this._logTouchEvent(event)};ScrollView.prototype._onTouchEnd=function(event){this.touchChildren=true;this._ScrV_Props_._scrollStarted=false;this._tempStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);this._tempStage.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTouchEnd,this);this._tempStage.removeEventListener(egret.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(egret.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};ScrollView.prototype._onEnterFrame=function(event){var time=egret.getTimer();if(time-this._ScrV_Props_._lastTouchTime>100&&time-this._ScrV_Props_._lastTouchTime<300){this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)}};ScrollView.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX;this._ScrV_Props_._lastTouchPosition.y=e.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e);this._ScrV_Props_._lastTouchTime=egret.getTimer()};ScrollView.prototype._getPointChange=function(e){return{x:this._ScrV_Props_._hCanScroll===false?0:this._ScrV_Props_._lastTouchPosition.x-e.stageX,y:this._ScrV_Props_._vCanScroll===false?0:this._ScrV_Props_._lastTouchPosition.y-e.stageY}};ScrollView.prototype._calcVelocitys=function(e){var time=egret.getTimer();if(this._ScrV_Props_._lastTouchTime==0){this._ScrV_Props_._lastTouchTime=time;return}var change=this._getPointChange(e);var timeoffset=time-this._ScrV_Props_._lastTouchTime;change.x/=timeoffset;change.y/=timeoffset;this._ScrV_Props_._velocitys.push(change);if(this._ScrV_Props_._velocitys.length>5)this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=e.stageX;this._ScrV_Props_._lastTouchPosition.y=e.stageY};ScrollView.prototype._getContentWidth=function(){return this._content.$explicitWidth||this._content.width};ScrollView.prototype._getContentHeight=function(){return this._content.$explicitHeight||this._content.height};ScrollView.prototype.getMaxScrollLeft=function(){var max=this._getContentWidth()-this.width;return Math.max(0,max)};ScrollView.prototype.getMaxScrollTop=function(){var max=this._getContentHeight()-this.height;return Math.max(0,max)};ScrollView.prototype._moveAfterTouchEnd=function(){if(this._ScrV_Props_._velocitys.length==0)return;var sum={x:0,y:0},totalW=0;for(var i=0;i<this._ScrV_Props_._velocitys.length;i++){var v=this._ScrV_Props_._velocitys[i];var w=ScrollView.weight[i];sum.x+=v.x*w;sum.y+=v.y*w;totalW+=w}this._ScrV_Props_._velocitys.length=0;if(this.scrollSpeed<=0)this.scrollSpeed=1;var x=sum.x/totalW*this.scrollSpeed,y=sum.y/totalW*this.scrollSpeed;var pixelsPerMSX=Math.abs(x),pixelsPerMSY=Math.abs(y);var maxLeft=this.getMaxScrollLeft();var maxTop=this.getMaxScrollTop();var datax=pixelsPerMSX>.02?this.getAnimationDatas(x,this._ScrV_Props_._scrollLeft,maxLeft):{position:this._ScrV_Props_._scrollLeft,duration:1};var datay=pixelsPerMSY>.02?this.getAnimationDatas(y,this._ScrV_Props_._scrollTop,maxTop):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(datax.position,datax.duration);this.setScrollTop(datay.position,datay.duration)};ScrollView.prototype.onTweenFinished=function(tw){if(tw==this._ScrV_Props_._vScrollTween)this._ScrV_Props_._isVTweenPlaying=false;if(tw==this._ScrV_Props_._hScrollTween)this._ScrV_Props_._isHTweenPlaying=false;if(this._ScrV_Props_._isHTweenPlaying==false&&this._ScrV_Props_._isVTweenPlaying==false){this._onScrollFinished()}};ScrollView.prototype._onScrollStarted=function(){};ScrollView.prototype._onScrollFinished=function(){egret.ScrollTween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=false;this._ScrV_Props_._isVTweenPlaying=false;this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))};ScrollView.prototype.setScrollTop=function(scrollTop,duration){if(duration===void 0){duration=0}var finalPosition=Math.min(this.getMaxScrollTop(),Math.max(scrollTop,0));if(duration==0){this.scrollTop=finalPosition;return}if(this._ScrV_Props_._bounces==false)scrollTop=finalPosition;var vtween=egret.ScrollTween.get(this).to({scrollTop:scrollTop},duration,egret.ScrollEase.quartOut);if(finalPosition!=scrollTop){vtween.to({scrollTop:finalPosition},300,egret.ScrollEase.quintOut)}this._ScrV_Props_._isVTweenPlaying=true;this._ScrV_Props_._vScrollTween=vtween;vtween.call(this.onTweenFinished,this,[vtween]);if(!this._ScrV_Props_._isHTweenPlaying)this._onScrollStarted()};ScrollView.prototype.setScrollLeft=function(scrollLeft,duration){if(duration===void 0){duration=0}var finalPosition=Math.min(this.getMaxScrollLeft(),Math.max(scrollLeft,0));if(duration==0){this.scrollLeft=finalPosition;return}if(this._ScrV_Props_._bounces==false)scrollLeft=finalPosition;var htween=egret.ScrollTween.get(this).to({scrollLeft:scrollLeft},duration,egret.ScrollEase.quartOut);if(finalPosition!=scrollLeft){htween.to({scrollLeft:finalPosition},300,egret.ScrollEase.quintOut)}this._ScrV_Props_._isHTweenPlaying=true;this._ScrV_Props_._hScrollTween=htween;htween.call(this.onTweenFinished,this,[htween]);if(!this._ScrV_Props_._isVTweenPlaying)this._onScrollStarted()};ScrollView.prototype.getAnimationDatas=function(pixelsPerMS,curPos,maxPos){var absPixelsPerMS=Math.abs(pixelsPerMS);var extraFricition=.95;var duration=0;var friction=.998;var minVelocity=.02;var posTo=curPos+pixelsPerMS*500;if(posTo<0||posTo>maxPos){posTo=curPos;while(Math.abs(pixelsPerMS)!=Infinity&&Math.abs(pixelsPerMS)>minVelocity){posTo+=pixelsPerMS;if(posTo<0||posTo>maxPos){pixelsPerMS*=friction*extraFricition}else{pixelsPerMS*=friction}duration++}}else{duration=-Math.log(minVelocity/absPixelsPerMS)*500}var result={position:Math.min(maxPos+50,Math.max(posTo,-50)),duration:duration};return result};ScrollView.prototype.cloneTouchEvent=function(event){var evt=new egret.TouchEvent(event.type,event.bubbles,event.cancelable);evt.touchPointID=event.touchPointID;evt.$stageX=event.stageX;evt.$stageY=event.stageY;evt.touchDown=event.touchDown;evt.$isDefaultPrevented=false;evt.$target=event.target;return evt};ScrollView.prototype.throwNotSupportedError=function(){egret.$error(1023)};ScrollView.prototype.addChild=function(child){this.throwNotSupportedError();return null};ScrollView.prototype.addChildAt=function(child,index){this.throwNotSupportedError();return null};ScrollView.prototype.removeChild=function(child){this.throwNotSupportedError();return null};ScrollView.prototype.removeChildAt=function(index){this.throwNotSupportedError();return null};ScrollView.prototype.setChildIndex=function(child,index){this.throwNotSupportedError()};ScrollView.prototype.swapChildren=function(child1,child2){this.throwNotSupportedError()};ScrollView.prototype.swapChildrenAt=function(index1,index2){this.throwNotSupportedError()};ScrollView.weight=[1,1.33,1.66,2,2.33];return ScrollView}(egret.DisplayObjectContainer);egret.ScrollView=ScrollView;__reflect(ScrollView.prototype,"egret.ScrollView")})(egret||(egret={}));var egret;(function(egret){var ScrollViewProperties=function(){function ScrollViewProperties(){this._verticalScrollPolicy="auto";this._horizontalScrollPolicy="auto";this._scrollLeft=0;this._scrollTop=0;this._hCanScroll=false;this._vCanScroll=false;this._lastTouchPosition=new egret.Point(0,0);this._touchStartPosition=new egret.Point(0,0);this._scrollStarted=false;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isHTweenPlaying=false;this._isVTweenPlaying=false;this._hScrollTween=null;this._vScrollTween=null;this._bounces=true}return ScrollViewProperties}();egret.ScrollViewProperties=ScrollViewProperties;__reflect(ScrollViewProperties.prototype,"egret.ScrollViewProperties")})(egret||(egret={}));var egret;(function(egret){function $getUrl(request){var url=request.url;if(url.indexOf("?")==-1&&request.method==egret.URLRequestMethod.GET&&request.data&&request.data instanceof egret.URLVariables){url=url+"?"+request.data.toString()}return url}var URLLoader=function(_super){__extends(URLLoader,_super);function URLLoader(request){if(request===void 0){request=null}var _this=_super.call(this)||this;_this.dataFormat=egret.URLLoaderDataFormat.TEXT;_this.data=null;_this._request=null;_this._status=-1;if(request){_this.load(request)}return _this}URLLoader.prototype.load=function(request){this._request=request;this.data=null;var loader=this;if(loader.dataFormat==egret.URLLoaderDataFormat.TEXTURE){this.loadTexture(loader);return}if(loader.dataFormat==egret.URLLoaderDataFormat.SOUND){this.loadSound(loader);return}var virtualUrl=$getUrl(request);var httpRequest=new egret.HttpRequest;httpRequest.open(virtualUrl,request.method==egret.URLRequestMethod.POST?egret.HttpMethod.POST:egret.HttpMethod.GET);var sendData;if(request.method==egret.URLRequestMethod.GET||!request.data){}else if(request.data instanceof egret.URLVariables){httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var urlVars=request.data;sendData=urlVars.toString()}else{httpRequest.setRequestHeader("Content-Type","multipart/form-data");sendData=request.data}var length=request.requestHeaders.length;for(var i=0;i<length;i++){var urlRequestHeader=request.requestHeaders[i];httpRequest.setRequestHeader(urlRequestHeader.name,urlRequestHeader.value)}httpRequest.addEventListener(egret.Event.COMPLETE,function(){loader.data=httpRequest.response;egret.Event.dispatchEvent(loader,egret.Event.COMPLETE)},this);httpRequest.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){egret.IOErrorEvent.dispatchIOErrorEvent(loader)},this);httpRequest.responseType=loader.dataFormat==egret.URLLoaderDataFormat.BINARY?egret.HttpResponseType.ARRAY_BUFFER:egret.HttpResponseType.TEXT;httpRequest.send(sendData)};URLLoader.prototype.getResponseType=function(dataFormat){switch(dataFormat){case egret.URLLoaderDataFormat.TEXT:case egret.URLLoaderDataFormat.VARIABLES:return egret.URLLoaderDataFormat.TEXT;case egret.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return dataFormat}};URLLoader.prototype.loadSound=function(loader){var self=this;var virtualUrl=loader._request.url;var sound=new egret.Sound;sound.addEventListener(egret.Event.COMPLETE,onLoadComplete,self);sound.addEventListener(egret.IOErrorEvent.IO_ERROR,onError,self);sound.addEventListener(egret.ProgressEvent.PROGRESS,onPostProgress,self);sound.load(virtualUrl);function onPostProgress(event){loader.dispatchEvent(event)}function onError(event){removeListeners();loader.dispatchEvent(event)}function onLoadComplete(e){removeListeners();loader.data=sound;window.setTimeout(function(){loader.dispatchEventWith(egret.Event.COMPLETE)},0)}function removeListeners(){sound.removeEventListener(egret.Event.COMPLETE,onLoadComplete,self);sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,onError,self);sound.removeEventListener(egret.ProgressEvent.PROGRESS,onPostProgress,self)}};URLLoader.prototype.loadTexture=function(loader){var self=this;var virtualUrl=loader._request.url;var imageLoader=new egret.ImageLoader;imageLoader.addEventListener(egret.Event.COMPLETE,onLoadComplete,self);imageLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,onError,self);imageLoader.addEventListener(egret.ProgressEvent.PROGRESS,onPostProgress,self);imageLoader.load(virtualUrl);function onPostProgress(event){loader.dispatchEvent(event)}function onError(event){removeListeners();loader.dispatchEvent(event)}function onLoadComplete(e){removeListeners();var bitmapData=imageLoader.data;if(bitmapData.source.setAttribute){bitmapData.source.setAttribute("bitmapSrc",virtualUrl)}var texture=new egret.Texture;texture._setBitmapData(bitmapData);loader.data=texture;window.setTimeout(function(){loader.dispatchEventWith(egret.Event.COMPLETE)},0)}function removeListeners(){imageLoader.removeEventListener(egret.Event.COMPLETE,onLoadComplete,self);imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,onError,self);imageLoader.removeEventListener(egret.ProgressEvent.PROGRESS,onPostProgress,self)}};URLLoader.prototype.__recycle=function(){this._request=null;this.data=null};return URLLoader}(egret.EventDispatcher);egret.URLLoader=URLLoader;__reflect(URLLoader.prototype,"egret.URLLoader")})(egret||(egret={}));var egret;(function(egret){var MovieClip=function(_super){__extends(MovieClip,_super);function MovieClip(movieClipData){var _this=_super.call(this)||this;_this.$texture=null;_this.offsetPoint=egret.Point.create(0,0);_this.$movieClipData=null;_this.frames=null;_this.$totalFrames=0;_this.frameLabels=null;_this.$frameLabelStart=0;_this.$frameLabelEnd=0;_this.frameEvents=null;_this.frameIntervalTime=0;_this.$eventPool=null;_this.$isPlaying=false;_this.isStopped=true;_this.playTimes=0;_this.$currentFrameNum=0;_this.$nextFrameNum=1;_this.displayedKeyFrameNum=0;_this.passedTime=0;_this.$frameRate=NaN;_this.lastTime=0;_this.$smoothing=egret.Bitmap.defaultSmoothing;_this.setMovieClipData(movieClipData);if(!egret.nativeRender){_this.$renderNode=new egret.sys.NormalBitmapNode}return _this}MovieClip.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)};Object.defineProperty(MovieClip.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(value){if(value==this.$smoothing){return}this.$smoothing=value},enumerable:true,configurable:true});MovieClip.prototype.$init=function(){this.$reset();var movieClipData=this.$movieClipData;if(movieClipData&&movieClipData.$isDataValid()){this.frames=movieClipData.frames;this.$totalFrames=movieClipData.numFrames;this.frameLabels=movieClipData.labels;this.frameEvents=movieClipData.events;this.$frameRate=movieClipData.frameRate;this.frameIntervalTime=1e3/this.$frameRate;this._initFrame()}};MovieClip.prototype.$reset=function(){this.frames=null;this.playTimes=0;this.$isPlaying=false;this.setIsStopped(true);this.$currentFrameNum=0;this.$nextFrameNum=1;this.displayedKeyFrameNum=0;this.passedTime=0;this.$eventPool=[]};MovieClip.prototype._initFrame=function(){if(this.$movieClipData.$isTextureValid()){this.advanceFrame();this.constructFrame()}};MovieClip.prototype.$updateRenderNode=function(){var texture=this.$texture;if(texture){var offsetX=Math.round(this.offsetPoint.x);var offsetY=Math.round(this.offsetPoint.y);var bitmapWidth=texture.$bitmapWidth;var bitmapHeight=texture.$bitmapHeight;var textureWidth=texture.$getTextureWidth();var textureHeight=texture.$getTextureHeight();var destW=Math.round(texture.$getScaleBitmapWidth());var destH=Math.round(texture.$getScaleBitmapHeight());var sourceWidth=texture.$sourceWidth;var sourceHeight=texture.$sourceHeight;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,texture.$bitmapData,texture.$bitmapX,texture.$bitmapY,bitmapWidth,bitmapHeight,offsetX,offsetY,textureWidth,textureHeight,destW,destH,sourceWidth,sourceHeight,egret.BitmapFillMode.SCALE,this.$smoothing)}};MovieClip.prototype.$measureContentBounds=function(bounds){var texture=this.$texture;if(texture){var x=this.offsetPoint.x;var y=this.offsetPoint.y;var w=texture.$getTextureWidth();var h=texture.$getTextureHeight();bounds.setTo(x,y,w,h)}else{bounds.setEmpty()}};MovieClip.prototype.$onAddToStage=function(stage,nestLevel){_super.prototype.$onAddToStage.call(this,stage,nestLevel);if(this.$isPlaying&&this.$totalFrames>1){this.setIsStopped(false)}};MovieClip.prototype.$onRemoveFromStage=function(){_super.prototype.$onRemoveFromStage.call(this);this.setIsStopped(true)};MovieClip.prototype.getFrameLabelByName=function(labelName,ignoreCase){if(ignoreCase===void 0){ignoreCase=false}if(ignoreCase){labelName=labelName.toLowerCase()}var frameLabels=this.frameLabels;if(frameLabels){var outputFramelabel=null;for(var i=0;i<frameLabels.length;i++){outputFramelabel=frameLabels[i];if(ignoreCase?outputFramelabel.name.toLowerCase()==labelName:outputFramelabel.name==labelName){return outputFramelabel}}}return null};MovieClip.prototype.getFrameStartEnd=function(labelName){var frameLabels=this.frameLabels;if(frameLabels){var outputFramelabel=null;for(var i=0;i<frameLabels.length;i++){outputFramelabel=frameLabels[i];if(labelName==outputFramelabel.name){this.$frameLabelStart=outputFramelabel.frame;this.$frameLabelEnd=outputFramelabel.end;break}}}};MovieClip.prototype.getFrameLabelByFrame=function(frame){var frameLabels=this.frameLabels;if(frameLabels){var outputFramelabel=null;for(var i=0;i<frameLabels.length;i++){outputFramelabel=frameLabels[i];if(outputFramelabel.frame==frame){return outputFramelabel}}}return null};MovieClip.prototype.getFrameLabelForFrame=function(frame){var outputFrameLabel=null;var tempFrameLabel=null;var frameLabels=this.frameLabels;if(frameLabels){for(var i=0;i<frameLabels.length;i++){tempFrameLabel=frameLabels[i];if(tempFrameLabel.frame>frame){return outputFrameLabel}outputFrameLabel=tempFrameLabel}}return outputFrameLabel};MovieClip.prototype.play=function(playTimes){if(playTimes===void 0){playTimes=0}this.lastTime=egret.getTimer();this.passedTime=0;this.$isPlaying=true;this.setPlayTimes(playTimes);if(this.$totalFrames>1&&this.$stage){this.setIsStopped(false)}};MovieClip.prototype.stop=function(){this.$isPlaying=false;this.setIsStopped(true)};MovieClip.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)};MovieClip.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)};MovieClip.prototype.gotoAndPlay=function(frame,playTimes){if(playTimes===void 0){playTimes=0}if(arguments.length==0||arguments.length>2){egret.$error(1022,"MovieClip.gotoAndPlay()")}if(typeof frame==="string"){this.getFrameStartEnd(frame)}else{this.$frameLabelStart=0;this.$frameLabelEnd=0}this.play(playTimes);this.gotoFrame(frame)};MovieClip.prototype.gotoAndStop=function(frame){if(arguments.length!=1){egret.$error(1022,"MovieClip.gotoAndStop()")}this.stop();this.gotoFrame(frame)};MovieClip.prototype.gotoFrame=function(frame){var frameNum;if(typeof frame==="string"){frameNum=this.getFrameLabelByName(frame).frame}else{frameNum=parseInt(frame+"",10);if(frameNum!=frame){egret.$error(1022,"Frame Label Not Found")}}if(frameNum<1){frameNum=1}else if(frameNum>this.$totalFrames){frameNum=this.$totalFrames}if(frameNum==this.$nextFrameNum){return}this.$nextFrameNum=frameNum;this.advanceFrame();this.constructFrame();this.handlePendingEvent()};MovieClip.prototype.advanceTime=function(timeStamp){var self=this;var advancedTime=timeStamp-self.lastTime;self.lastTime=timeStamp;var frameIntervalTime=self.frameIntervalTime;var currentTime=self.passedTime+advancedTime;self.passedTime=currentTime%frameIntervalTime;var num=currentTime/frameIntervalTime;if(num<1){return false}while(num>=1){num--;self.$nextFrameNum++;if(self.$nextFrameNum>self.$totalFrames||self.$frameLabelStart>0&&self.$nextFrameNum>self.$frameLabelEnd){if(self.playTimes==-1){self.$eventPool.push(egret.Event.LOOP_COMPLETE);self.$nextFrameNum=1}else{self.playTimes--;if(self.playTimes>0){self.$eventPool.push(egret.Event.LOOP_COMPLETE);self.$nextFrameNum=1}else{self.$nextFrameNum=self.$totalFrames;self.$eventPool.push(egret.Event.COMPLETE);self.stop();break}}}if(self.$currentFrameNum==self.$frameLabelEnd){self.$nextFrameNum=self.$frameLabelStart}self.advanceFrame()}self.constructFrame();self.handlePendingEvent();return false};MovieClip.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var event=this.frameEvents[this.$nextFrameNum];if(event&&event!=""){egret.MovieClipEvent.dispatchMovieClipEvent(this,egret.MovieClipEvent.FRAME_LABEL,event)}};MovieClip.prototype.constructFrame=function(){var self=this;var currentFrameNum=self.$currentFrameNum;if(self.displayedKeyFrameNum==currentFrameNum){return}var texture=self.$movieClipData.getTextureByFrame(currentFrameNum);self.$texture=texture;self.$movieClipData.$getOffsetByFrame(currentFrameNum,self.offsetPoint);self.displayedKeyFrameNum=currentFrameNum;self.$renderDirty=true;if(egret.nativeRender){self.$nativeDisplayObject.setDataToBitmapNode(self.$nativeDisplayObject.id,texture,[texture.$bitmapX,texture.$bitmapY,texture.$bitmapWidth,texture.$bitmapHeight,self.offsetPoint.x,self.offsetPoint.y,texture.$getScaleBitmapWidth(),texture.$getScaleBitmapHeight(),texture.$sourceWidth,texture.$sourceHeight]);self.$nativeDisplayObject.setWidth(texture.$getTextureWidth()+self.offsetPoint.x);self.$nativeDisplayObject.setHeight(texture.$getTextureHeight()+self.offsetPoint.y)}else{var p=self.$parent;if(p&&!p.$cacheDirty){p.$cacheDirty=true;p.$cacheDirtyUp()}var maskedObject=self.$maskedObject;if(maskedObject&&!maskedObject.$cacheDirty){maskedObject.$cacheDirty=true;maskedObject.$cacheDirtyUp()}}};MovieClip.prototype.$renderFrame=function(){var self=this;self.$texture=self.$movieClipData.getTextureByFrame(self.$currentFrameNum);self.$renderDirty=true;var p=self.$parent;if(p&&!p.$cacheDirty){p.$cacheDirty=true;p.$cacheDirtyUp()}var maskedObject=self.$maskedObject;if(maskedObject&&!maskedObject.$cacheDirty){maskedObject.$cacheDirty=true;maskedObject.$cacheDirtyUp()}};MovieClip.prototype.handlePendingEvent=function(){if(this.$eventPool.length!=0){this.$eventPool.reverse();var eventPool=this.$eventPool;var length_3=eventPool.length;var isComplete=false;var isLoopComplete=false;for(var i=0;i<length_3;i++){var event_1=eventPool.pop();if(event_1==egret.Event.LOOP_COMPLETE){isLoopComplete=true}else if(event_1==egret.Event.COMPLETE){isComplete=true}else{this.dispatchEventWith(event_1)}}if(isLoopComplete){this.dispatchEventWith(egret.Event.LOOP_COMPLETE)}if(isComplete){this.dispatchEventWith(egret.Event.COMPLETE)}}};Object.defineProperty(MovieClip.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"currentFrameLabel",{get:function(){var label=this.getFrameLabelByFrame(this.$currentFrameNum);return label&&label.name},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"currentLabel",{get:function(){var label=this.getFrameLabelForFrame(this.$currentFrameNum);return label?label.name:null},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(value){if(value==this.$frameRate){return}this.$frameRate=value;this.frameIntervalTime=1e3/this.$frameRate},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:true,configurable:true});Object.defineProperty(MovieClip.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(value){this.setMovieClipData(value)},enumerable:true,configurable:true});MovieClip.prototype.setMovieClipData=function(value){if(this.$movieClipData==value){return}this.$movieClipData=value;this.$init()};MovieClip.prototype.setPlayTimes=function(value){if(value<0||value>=1){this.playTimes=value<0?-1:Math.floor(value)}};MovieClip.prototype.setIsStopped=function(value){if(this.isStopped==value){return}this.isStopped=value;if(value){egret.ticker.$stopTick(this.advanceTime,this)}else{this.playTimes=this.playTimes==0?1:this.playTimes;this.lastTime=egret.getTimer();egret.ticker.$startTick(this.advanceTime,this)}};return MovieClip}(egret.DisplayObject);egret.MovieClip=MovieClip;__reflect(MovieClip.prototype,"egret.MovieClip")})(egret||(egret={}));var egret;(function(egret){var URLRequest=function(_super){__extends(URLRequest,_super);function URLRequest(url){if(url===void 0){url=null}var _this=_super.call(this)||this;_this.data=null;_this.method=egret.URLRequestMethod.GET;_this.url="";_this.requestHeaders=[];_this.url=url;return _this}return URLRequest}(egret.HashObject);egret.URLRequest=URLRequest;__reflect(URLRequest.prototype,"egret.URLRequest")})(egret||(egret={}));var egret;(function(egret){var URLRequestHeader=function(){function URLRequestHeader(name,value){this.name="";this.value="";this.name=name;this.value=value}return URLRequestHeader}();egret.URLRequestHeader=URLRequestHeader;__reflect(URLRequestHeader.prototype,"egret.URLRequestHeader")})(egret||(egret={}));var egret;(function(egret){var URLRequestMethod=function(){function URLRequestMethod(){}URLRequestMethod.GET="get";URLRequestMethod.POST="post";return URLRequestMethod}();egret.URLRequestMethod=URLRequestMethod;__reflect(URLRequestMethod.prototype,"egret.URLRequestMethod")})(egret||(egret={}));var egret;(function(egret){var URLVariables=function(_super){__extends(URLVariables,_super);function URLVariables(source){if(source===void 0){source=null}var _this=_super.call(this)||this;_this.variables=null;if(source!==null){_this.decode(source)}return _this}URLVariables.prototype.decode=function(source){if(!this.variables){this.variables={}}source=source.split("+").join(" ");var tokens,re=/[?&]?([^=]+)=([^&]*)/g;while(tokens=re.exec(source)){var key=decodeURIComponent(tokens[1]),val=decodeURIComponent(tokens[2]);if(key in this.variables==false){this.variables[key]=val;continue}var value=this.variables[key];if(value instanceof Array){value.push(val)}else{this.variables[key]=[value,val]}}};URLVariables.prototype.toString=function(){if(!this.variables){return""}var variables=this.variables;var stringArray=[];for(var key in variables){stringArray.push(this.encodeValue(key,variables[key]))}return stringArray.join("&")};URLVariables.prototype.encodeValue=function(key,value){if(value instanceof Array){return this.encodeArray(key,value)}else{return encodeURIComponent(key)+"="+encodeURIComponent(value)}};URLVariables.prototype.encodeArray=function(key,value){if(!key)return"";if(value.length==0){return encodeURIComponent(key)+"="}return value.map(function(v){return encodeURIComponent(key)+"="+encodeURIComponent(v)}).join("&")};return URLVariables}(egret.HashObject);egret.URLVariables=URLVariables;__reflect(URLVariables.prototype,"egret.URLVariables")})(egret||(egret={}));var egret;(function(egret){var Ticker=function(_super){__extends(Ticker,_super);function Ticker(){var _this=_super.call(this)||this;_this._timeScale=1;_this._paused=false;_this._callIndex=-1;_this._lastTime=0;_this.callBackList=[];if(Ticker.instance!=null){if(true){egret.$error(1033)}}egret.ticker.$startTick(_this.update,_this);_this._lastTime=egret.getTimer();return _this}Ticker.prototype.update=function(timeStamp){var advancedTime=timeStamp-this._lastTime;this._lastTime=timeStamp;if(this._paused){return false}var frameTime=advancedTime*this._timeScale;this._callList=this.callBackList.concat();this._callIndex=0;for(;this._callIndex<this._callList.length;this._callIndex++){var eventBin=this._callList[this._callIndex];eventBin.listener.call(eventBin.thisObject,frameTime)}this._callIndex=-1;this._callList=null;return false};Ticker.prototype.register=function(listener,thisObject,priority){if(priority===void 0){priority=0}this.$insertEventBin(this.callBackList,"",listener,thisObject,false,priority,false)};Ticker.prototype.unregister=function(listener,thisObject){this.$removeEventBin(this.callBackList,listener,thisObject)};Ticker.prototype.setTimeScale=function(timeScale){this._timeScale=timeScale};Ticker.prototype.getTimeScale=function(){return this._timeScale};Ticker.prototype.pause=function(){this._paused=true};Ticker.prototype.resume=function(){this._paused=false};Ticker.getInstance=function(){if(Ticker.instance==null){Ticker.instance=new Ticker}return Ticker.instance};return Ticker}(egret.EventDispatcher);egret.Ticker=Ticker;__reflect(Ticker.prototype,"egret.Ticker")})(egret||(egret={}));var egret;(function(egret){var MainContext=function(_super){__extends(MainContext,_super);function MainContext(){return _super.call(this)||this}Object.defineProperty(MainContext.prototype,"stage",{get:function(){return egret.sys.$TempStage},enumerable:true,configurable:true});Object.defineProperty(MainContext,"instance",{get:function(){if(MainContext._instance==null){MainContext._instance=new MainContext}return MainContext._instance},enumerable:true,configurable:true});MainContext.deviceType=null;MainContext.DEVICE_PC="web";MainContext.DEVICE_MOBILE="native";return MainContext}(egret.EventDispatcher);egret.MainContext=MainContext;__reflect(MainContext.prototype,"egret.MainContext")})(egret||(egret={}));egret["testDeviceType1"]=function(){if(!window["navigator"]||!navigator){return true}var ua=navigator.userAgent.toLowerCase();return ua.indexOf("mobile")!=-1||ua.indexOf("android")!=-1};egret.MainContext.deviceType=egret["testDeviceType1"]()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;delete egret["testDeviceType1"];var egret;(function(egret){var Recycler=function(_super){__extends(Recycler,_super);function Recycler(autoDisposeTime){if(autoDisposeTime===void 0){autoDisposeTime=300}var _this=_super.call(this)||this;_this.objectPool=[];_this._length=0;if(autoDisposeTime<1)autoDisposeTime=1;_this.autoDisposeTime=autoDisposeTime;_this.frameCount=0;return _this}Recycler.$init=function(){egret.ticker.$startTick(Recycler.onUpdate,Recycler)};Recycler.onUpdate=function(timeStamp){var list=Recycler._callBackList;for(var i=list.length-1;i>=0;i--){list[i].$checkFrame()}return false};Recycler.prototype.$checkFrame=function(){this.frameCount--;if(this.frameCount<=0){this.dispose()}};Object.defineProperty(Recycler.prototype,"length",{get:function(){return this._length},enumerable:true,configurable:true});Recycler.prototype.push=function(object){var pool=this.objectPool;if(pool.indexOf(object)==-1){pool.push(object);if(object.__recycle){object.__recycle()}this._length++;if(this.frameCount==0){this.frameCount=this.autoDisposeTime;Recycler._callBackList.push(this)}}};Recycler.prototype.pop=function(){if(this._length==0)return null;this._length--;return this.objectPool.pop()};Recycler.prototype.dispose=function(){if(this._length>0){this.objectPool=[];this._length=0}this.frameCount=0;var list=Recycler._callBackList;var index=list.indexOf(this);if(index!=-1){list.splice(index,1)}};Recycler._callBackList=[];return Recycler}(egret.HashObject);egret.Recycler=Recycler;__reflect(Recycler.prototype,"egret.Recycler");Recycler.$init()})(egret||(egret={}));var egret;(function(egret){var setIntervalCache={};var setIntervalIndex=0;var setIntervalCount=0;var lastTime=0;function setInterval(listener,thisObject,delay){var args=[];for(var _i=3;_i<arguments.length;_i++){args[_i-3]=arguments[_i]}var data={listener:listener,thisObject:thisObject,delay:delay,originDelay:delay,params:args};setIntervalCount++;if(setIntervalCount==1){lastTime=egret.getTimer();egret.ticker.$startTick(intervalUpdate,null)}setIntervalIndex++;setIntervalCache[setIntervalIndex]=data;return setIntervalIndex}egret.setInterval=setInterval;function clearInterval(key){if(setIntervalCache[key]){setIntervalCount--;delete setIntervalCache[key];if(setIntervalCount==0){egret.ticker.$stopTick(intervalUpdate,null)}}}egret.clearInterval=clearInterval;function intervalUpdate(timeStamp){var dt=timeStamp-lastTime;lastTime=timeStamp;for(var key in setIntervalCache){var data=setIntervalCache[key];data.delay-=dt;if(data.delay<=0){data.delay=data.originDelay;data.listener.apply(data.thisObject,data.params)}}return false}})(egret||(egret={}));var egret;(function(egret){var setTimeoutCache={};var setTimeoutIndex=0;var setTimeoutCount=0;var lastTime=0;function setTimeout(listener,thisObject,delay){var args=[];for(var _i=3;_i<arguments.length;_i++){args[_i-3]=arguments[_i]}var data={listener:listener,thisObject:thisObject,delay:delay,params:args};setTimeoutCount++;if(setTimeoutCount==1&&egret.ticker){lastTime=egret.getTimer();egret.ticker.$startTick(timeoutUpdate,null)}setTimeoutIndex++;setTimeoutCache[setTimeoutIndex]=data;return setTimeoutIndex}egret.setTimeout=setTimeout;function clearTimeout(key){if(setTimeoutCache[key]){setTimeoutCount--;delete setTimeoutCache[key];if(setTimeoutCount==0&&egret.ticker){egret.ticker.$stopTick(timeoutUpdate,null)}}}egret.clearTimeout=clearTimeout;function timeoutUpdate(timeStamp){var dt=timeStamp-lastTime;lastTime=timeStamp;for(var key in setTimeoutCache){var key2=key;var data=setTimeoutCache[key2];data.delay-=dt;if(data.delay<=0){clearTimeout(key2);data.listener.apply(data.thisObject,data.params)}}return false}})(egret||(egret={}));